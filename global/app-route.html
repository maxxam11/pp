<polymer-element name="app-route">
    <template>

        <more-routing driver="hash"></more-routing>
        
        <more-route-switch routeContext id="routes">
            
            <template when-route="/news"><page-news pageTitle="Новости"><content></content></page-news></template>            
            <template when-route="/news-item/:id"><page-news-item newsId="{{params.id}}"  pageTitle="Новости"></page-news-item></template>
            
            <template when-route="/weather"><page-weather pageTitle="Погода"><content></content></page-weather></template>
            
            <template when-route="/payments/account-add/:id"><page-account-add accountId="{{params.id}}"></page-account-add></template>
            <template when-route="/payments"><page-payments pageTitle="Мои платежи"><content></content></page-payments></template>
            
            <template when-route="/info/wiki"><page-wiki pageTitle="{{ isTown ? 'О городе' : 'О районе' }}"><content></content></page-wiki></template>
            <template when-route="/info/phones"><page-phones pageTitle="Телефоны"><content></content></page-phones></template> 
            <template when-route="/info"><page-info pageTitle="Полезная информация"><content></content></page-info></template>
            
            <template when-route="/feedback"><page-feedback pageTitle="Обратная связь"><content></content></page-feedback></template>
            
            <template when-route="/nointernet"><page-nointernet><content></content></page-nointernet></template>

            <template else><page-news pageTitle="Новости"><content></content></page-news></template>

        </more-route-switch>

    </template>
    <script>        
        Polymer('app-route', {
            ready: function(){ 
                this.isTown = CONFIG.space.isTown;
                for(var i = 0, l = CONFIG.routes.length; i < l; i++) { 
                    var route = CONFIG.routes[i];
                    $(this.$.routes).prepend(
                      '<template when-route="/_space' + route.route + '">' 
                      + '<page-' + route.page + (route.param ? ' ' + route.param + '="{{params.id}}"' : '') + ' pageTitle="' + route.pageTitle + '">'
                      + '<content></content>'
                      + '</page-' + route.page + '>' 
                      + '</template>');
                } 
            },
        });
        
    </script>
</polymer-element>































