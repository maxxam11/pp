<polymer-element name="page-weather" attributes="pageTitle">
    <template>
        <link rel="stylesheet" href="../css/main.css">
        
         <style>
            div.description { padding: 10px 20px; }
            core-image { width: 100px; height: 100px; float: left; margin: 10px 20px 10px 0; }           
        </style>
        
        <app-ajax
            id="ajax"
            auto
            op="weather/now"
            params='{}'
            on-core-response="{{handleResponse}}"
            on-core-error="{{handleResponseError}}"></app-ajax>
        
        <el-page pagetitle="{{pageTitle}}">
            <div id="toolbarMainIcon"><content></content></div>
            <div id="toolbarIcons">
                
            </div>
            <div id="scroller" flex style="overflow: auto;" on-scroll="{{scroll}}">            
                <div id="wrapper" class="wrapper">
                    
                    <div class="description">
                        <core-image position="left" sizing="contain" src="img/weather/100/{{weather.currently.icon}}.png"></core-image>
                        <p>Сейчас {{weather.currently.summary}} 
                            {{ weather.currently.temperature }}°C<br>
                            {{ weather.currently.windSpeed ? weather.currently.windSummary + ' ветер ' + weather.currently.windSpeed + ' м/с' : 'ветра нет' }}<br>
                            Влажность {{ weather.currently.humidity }}%<br>
                            Давление {{ weather.currently.pressure }} мм рт.ст.</p>
                    </div>
                    
                    <template repeat="{{item in list}}">
                        
                        <paper-item class="separator">
                            <core-icon icon="maps:map"></core-icon>
                            <a href="#!/dk-item/{{ item.id }}">{{ item.title }}</a>
                        </paper-item>
                        
                        
                                                
                    </template>
                </div> 
            </div>
            
        </el-page>

    </template>
    <script>
        Polymer('page-weather', {
            ready: function(){
                this.weather = global.weather;
            },
            handleResponse: function(e, detail, sender) {
                this.weather = global.weather = detail.response.data; 
            },
            handleResponseError: function() {
                
            }
        });
        
    </script>
</polymer-element>