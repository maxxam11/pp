<polymer-element name="page-phones">
    <template>        
        <link rel="stylesheet" href="../css/main.css">
        <style>
            .contact { padding: 10px 16px; }            
            .title { font-size: 80%; text-transform: uppercase; }
            .descr { font-size: 80%; color: grey; padding: 5px 0;  }
            paper-button { margin: 3px 4px 8px 0; }
            core-icon { margin-right: 4px; }
        </style>
        
        <app-ajax
            id="ajaxList"
            op="info/list"
            errorNoHandle="true"
            params='{}'
            on-core-response="{{handleResponseList}}"
            on-core-error=""></app-ajax>
        
        <el-page pageTitle="Экстренные службы">
            <div id="toolbarMainIcon"><content></content></div>
            <!--<div id="toolbarIcons"><paper-icon-button icon="add" on-click="{{addPhone}}"></paper-icon-button></div>-->
            
            <div flex style="overflow: auto; padding-top: 10px; ">                               
                
                <template repeat="{{contact in contacts}}">
                    <div class="contact separator">                
                        <div class='title primary-text-color'>{{contact.name}}</div>  
                        <div class="descr secondary-text-color">{{contact.descr}}</div>
                        <template repeat="{{phone in contact.phones}}">
                            <paper-button raised class="primary-color" on-click="{{buttonClick}}">
                                <!--<core-icon icon="communication:phone"></core-icon>-->
                                {{phone}}
                            </paper-button>
                        </template>
                    </div>
                </template>
                
            </div>
        </el-page>
        
    </template>
    
    
    
    <script>
        Polymer('page-phones', {
            contacts: [
                {
                    name: 'Единая диспетчерская служба',
                    descr: 'Можно обращаться по любым экстренным вопросам',
                    phones: ['+7 495 563-79-32'],
                },{
                    name: 'Служба спасения, пожарная охрана',
                    phones: ['+7 495 562-01-10', '+7 495 562-10-38'],
                },{
                    name: 'Полиция',
                    phones: ['+7 495 562-22-20', '+7 495 562-41-85'],
                },{
                    name: 'Участковый Павшинской поймы',
                    phones: ['+7 495 562-10-38'],
                },{
                    name: 'Скорая медицинская помощь',
                    phones: ['+7 495 562-35-35'],
                },{
                    name: 'ГИБДД',
                    descr: 'Вызвать инспектора в случае ДТП или если вы стали свидетелем нарушения правил дорожного движения',
                    phones: ['+7 495 563-02-67'],
                },{
                    name: 'Роспотребнадзор',
                    descr: 'Обращаться в случае, если возникли претензии к продавцу или поставщику услуг',
                    phones: ['+7 495 562-35-23'],
                },{
                    name: 'Телефон доверия',
                    descr: 'Можно анонимно обратится, чтобы обсудить трудную жизненную ситуацию и получить ответ на любой вопрос',
                    phones: ['+7 495 562-96-76'],
                },{
                    name: 'Справочная служба',
                    descr: 'Здесь можно узнать интересующие телефоны других городских служб',
                    phones: ['+7 495 562-02-80'],
                }
            ],
            pageTitle: 'Экстренные службы',
            ready: function(){
                document.title = this.pageTitle;
            },
            buttonClick: function(event, detail, sender) { 
                document.location.href = 'tel:' + sender.innerText;
                //@todo для iphone надо плагин подключть http://rickluna.com/wp/2012/02/making-a-phone-call-from-within-phonegap-in-android-and-ios/
                
            },
            addPhone: function(event, detail, sender) { 
                //@todo давать возможность предлагать добавлять телефон
                // открываем модальное окно и в нем размещаем компонент обратной связи с заголовокм и текстом:
                // "Новый телефон в экстренные службы", "Предлагаю добвать телефон экстренной службы: "
            }
            
        });
    </script>
</polymer-element>